<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Kaleidoscope: Kaleidoscope-Leader</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kaleidoscope
   </div>
   <div id="projectbrief">Customizable firmware for keyboards</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Kaleidoscope-Leader </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="https://img.shields.io/badge/stable-✔-black.svg?style=flat&colorA=44cc11&colorB=494e52"  alt="status"/>
</div>
<p> <a href="https://travis-ci.org/keyboardio/Kaleidoscope-Leader">![Build Status][travis:image]</a></p>
<p>Leader keys are a kind of key where when they are tapped, all following keys are swallowed, until the plugin finds a matching sequence in the dictionary, it times out, or fails to find any possibilities. When a sequence is found, the corresponding action is executed, but the processing still continues. If any key is pressed that is not the continuation of the existing sequence, processing aborts, and the key is handled normally.</p>
<p>This behaviour is best described with an example. Suppose we want a behaviour where <code>LEAD u</code> starts unicode input mode, and <code>LEAD u h e a r t</code> should result in a heart symbol being input, and we want <code>LEAD u 0 0 e 9 SPC</code> to input <code>é</code>, and any other hex code that follows <code>LEAD u</code>, should be handled as-is, and passed to the host. Obviously, we can't have all of this in a dictionary.</p>
<p>So we put <code>LEAD u</code> and <code>LEAD u h e a r t</code> in the dictionary only. The first will start unicode input mode, the second will type in the magic sequence that results in the symbol, and then aborts the leader sequence processing. With this setup, if we type <code>LEAD u 0</code>, then <code>LEAD u</code> will be handled first, and start unicode input mode. Then, at the <code>0</code>, the plugin notices it is not part of any sequence, so aborts leader processing, and passes the key on as-is, and it ends up being sent to the host. Thus, we covered all the cases of our scenario!</p>
<h2>Using the plugin</h2>
<p>To use the plugin, one needs to include the header, implement some actions, create a dictionary, and configure the provided <code>Leader</code> object to use the dictionary:</p>
<p>```c++ #include &lt;<a class="el" href="Kaleidoscope_8h_source.html">Kaleidoscope.h</a>&gt; #include &lt;<a class="el" href="Kaleidoscope-Leader_8h_source.html">Kaleidoscope-Leader.h</a>&gt;</p>
<p>static void leaderA() { Serial.println("leaderA"); }</p>
<p>static void leaderTX() { Serial.println("leaderTX"); }</p>
<p>static const <a class="el" href="structkaleidoscope_1_1Leader_1_1dictionary__t.html">kaleidoscope::Leader::dictionary_t</a> leader_dictionary PROGMEM = LEADER_DICT({LEADER_SEQ(LEAD(0), Key_A), leaderA}, {LEADER_SEQ(LEAD(0), Key_T, Key_X), leaderTX});</p>
<p>void setup() { Serial.begin(9600);</p>
<p>Kaleidoscope.use(&amp;Leader);</p>
<p>Kaleidoscope.setup();</p>
<p>Leader.dictionary = leader_dictionary; } ```</p>
<p>The dictionary is made up of a list of keys, and an action callback. Using the <code>LEADER_DICT</code> and <code>LEADER_SEQ</code> helpers is recommended. The dictionary <em>must</em> be marked <code>PROGMEM</code>!</p>
<p><b>Note</b> that we need to use the <code>Leader</code> object before any other that adds or changes key behaviour! Failing to do so may result in unpredictable behaviour.</p>
<h2>Plugin methods</h2>
<p>The plugin provides the <code>Leader</code> object, with the following methods and properties:</p>
<h3><code>.dictionary</code></h3>
<blockquote class="doxtable">
<p>Set this property to the dictionary <code>Leader</code> should use. The dictionary is an array of <code><a class="el" href="structkaleidoscope_1_1Leader_1_1dictionary__t.html">kaleidoscope::Leader::dictionary_t</a></code> elements. Each element is made up of two elements, the first being a list of keys, the second an action to perform when the sequence is found.i</p>
<p>The dictionary <em>MUST</em> reside in <code>PROGMEM</code>.</p>
<p></p>
</blockquote>
<h3><code>.reset()</code></h3>
<blockquote class="doxtable">
<p>Finishes the leader sequence processing. This is best called from actions that are final actions, where one does not wish to continue the leader sequence further in the hopes of finding a longer match.</p>
<p></p>
</blockquote>
<h3><code>.time_out</code></h3>
<blockquote class="doxtable">
<p>The number of milliseconds to wait before a sequence times out. Once the sequence timed out, if there is a partial match with an action, that will be performed, otherwise the Leader sequence will simply reset.</p>
<p>Defaults to 1000.</p>
<p></p>
</blockquote>
<h2>Dependencies</h2>
<ul>
<li><a href="https://github.com/keyboardio/Kaleidoscope-Ranges">Kaleidoscope-Ranges</a></li>
</ul>
<h2>Further reading</h2>
<p>Starting from the <a href="https://github.com/keyboardio/Kaleidoscope-Leader/blob/master/examples/Leader/Leader.ino">example</a> is the recommended way of getting started with the plugin. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
