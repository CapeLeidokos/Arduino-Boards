<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Kaleidoscope: Kaleidoscope-MagicCombo</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kaleidoscope
   </div>
   <div id="projectbrief">Customizable firmware for keyboards</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Kaleidoscope-MagicCombo </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="https://img.shields.io/badge/stable-âœ”-black.svg?style=flat&colorA=44cc11&colorB=494e52"  alt="status"/>
</div>
<p> <a href="https://travis-ci.org/keyboardio/Kaleidoscope-MagicCombo">![Build Status][travis:image]</a></p>
<p>The <code>MagicCombo</code> extension provides a way to perform custom actions when a particular set of keys are held down together. The functionality assigned to these keys are not changed, and the custom action triggers as long as all keys within the set are pressed. The order in which they were pressed do not matter.</p>
<p>This can be used to tie complex actions to key chords.</p>
<h2>Using the extension</h2>
<p>To use the extension, we must include the header, create an array of combos we want to work with, let the plugin know we want to work with those, and then use a special function to handle the combos:</p>
<p>```c++ #include &lt;<a class="el" href="Kaleidoscope_8h_source.html">Kaleidoscope.h</a>&gt; #include &lt;<a class="el" href="Kaleidoscope-MagicCombo_8h_source.html">Kaleidoscope-MagicCombo.h</a>&gt;</p>
<p>static const KaleidoscopePlugins::MagicCombo::combo_t magic_combos[] PROGMEM = { {R1C3 | R2C1 | R2C4 | R2C7, // left hand, R0C11 | R1C12 | R2C14 //right hand }, {0, 0} };</p>
<p>void magicComboActions(uint8_t combo_index, uint32_t left_hand, uint32_t right_hand) { switch (combo_index) { case 0: Serial.println("It's a kind of magic!"); break; } }</p>
<p>void setup() { Serial.begin(9600);</p>
<p>Kaleidoscope.use(&amp;MagicCombo);</p>
<p>Kaleidoscope.setup();</p>
<p>MagicCombo.magic_combos = magic_combos; } ```</p>
<p>The combo list <b>must</b> reside in <code>PROGMEM</code>, and is a list of tuples. Each element in the array has two fields: the left hand state, and the right hand state upon which to trigger the custom action. Both of these are bit fields, each bit set tells the extension that the key with that index must be held for the action to trigger. It is recommended to use the <code>RxCy</code> macros of the core <code>KaleidoscopeFirmware</code>, and <em>or</em> them together to form a bitfield.</p>
<p>The combo list <b>must</b> end with an element containing zero values for both the left and the right halves.</p>
<h2>Extension methods</h2>
<p>The extension provides a <code>MagicCombo</code> singleton object, with the following methods and properties:</p>
<h3><code>.magic_combos</code></h3>
<blockquote class="doxtable">
<p>Setting this property lets the plugin know which combinations of key presses we are interested in. If any of these are found active, the <code>magicComboActions()</code> function will be called.</p>
<p></p>
</blockquote>
<h3><code>.min_interval</code></h3>
<blockquote class="doxtable">
<p>Restrict the magic action to fire at most once every <code>minInterval</code> milliseconds.</p>
<p>Defaults to 500.</p>
<p></p>
</blockquote>
<h2>Overrideable methods</h2>
<p>Whenever an combination is found to be held, the extension will trigger an action, in each scan cycle until the keys remain held. This is done by calling the overrideable <code>magicComboActions</code> function:</p>
<h3><code>magicComboActions(combo_index, left_hand, right_hand)</code></h3>
<blockquote class="doxtable">
<p>Called whenever a combination is found to be held. The function by default does nothing, and it is recommended to override it from within the Sketch.</p>
<p>The first argument will be the index in the combo list, the other two are the key states on the left and right halves, respectively.</p>
<p>Plugins that build upon this extensions <em>should not</em> override this function, but provide helpers that can be called from it. An override should only happen in the Sketch.</p>
<p></p>
</blockquote>
<h2>Further reading</h2>
<p>Starting from the <a href="https://github.com/keyboardio/Kaleidoscope-MagicCombo/blob/master/examples/MagicCombo/MagicCombo.ino">example</a> is the recommended way of getting started with the plugin. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
