<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Kaleidoscope: Kaleidoscope-GhostInTheFirmware</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kaleidoscope
   </div>
   <div id="projectbrief">Customizable firmware for keyboards</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Kaleidoscope-GhostInTheFirmware </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="https://img.shields.io/badge/experimental----black.svg?style=flat&colorA=dfb317&colorB=494e52"  alt="status"/>
</div>
<p> <a href="https://travis-ci.org/keyboardio/Kaleidoscope-GhostInTheFirmware">![Build Status][travis:image]</a></p>
<p>Born out of the desire to demo LED effects on the keyboard without having to touch it by hand (which would obstruct the video), the <code>GhostInTheFirmware</code> plugin allows one to inject events at various delays, by telling it which keys to press. Unlike macros, these press keys at given positions, as if they were pressed by someone typing on it - the firmware will not see the difference.</p>
<p>Given a sequence (with press- and delay times), the plugin will walk through it once activated, and hold the key for the specified amount, release it, and move on to the next after the delay time.</p>
<h2>Using the plugin</h2>
<p>To use the plugin, one needs to include the header, and configure it with a list of key coordinates, a press time, and a delay time quartett. One also needs a way to trigger starting the sequence, and a macro is the most convenient way for that.</p>
<p>```c++ #include &lt;<a class="el" href="Kaleidoscope_8h_source.html">Kaleidoscope.h</a>&gt; #include &lt;<a class="el" href="Kaleidoscope-GhostInTheFirmware_8h_source.html">Kaleidoscope-GhostInTheFirmware.h</a>&gt; #include &lt;<a class="el" href="Kaleidoscope-Macros_8h_source.html">Kaleidoscope-Macros.h</a>&gt;</p>
<p>const macro_t *macroAction(uint8_t macro_index, uint8_t key_state) { if (macro_index == 0 &amp;&amp; keyToggledOn(key_state)) GhostInTheFirmware.activate();</p>
<p>return MACRO_NONE; }</p>
<p>static const <a class="el" href="structkaleidoscope_1_1GhostInTheFirmware_1_1GhostKey.html">kaleidoscope::GhostInTheFirmware::GhostKey</a> ghost_keys[] PROGMEM = { {0, 0, 200, 50}, {0, 0, 0} };</p>
<p>void setup() { Kaleidoscope.use(&amp;GhostInTheFirmware, &amp;Macros);</p>
<p>Kaleidoscope.setup ();</p>
<p>GhostInTheFirmware.ghost_keys = ghost_keys; } ```</p>
<p>The plugin won't be doing anything until its <code>activate()</code> method is called - hence the macro.</p>
<h2>Plugin methods</h2>
<p>The plugin provides the <code>GhostInTheFirmware</code> object, which has the following methods and properties:</p>
<h3><code>.activate()</code></h3>
<blockquote class="doxtable">
<p>Start playing back the sequence. Best called from a macro.</p>
<p></p>
</blockquote>
<h3><code>.ghost_keys</code></h3>
<blockquote class="doxtable">
<p>Set this property to the sequence of keys to press, by assigning a sequence to this variable. Each element is a quartett of <code>row</code>, <code>column</code>, a <code>pressTime</code>, and a <code>delay</code>. Each of these will be pressed in different cycles, unlike macros which play back within a single cycle.</p>
<p>The key at <code>row</code>, <code>column</code> will be held for <code>pressTime</code> milliseconds, and after an additional <code>delay</code> milliseconds, the plugin will move on to the next entry in the sequence.</p>
<p>The sequence <em>MUST</em> reside in <code>PROGMEM</code>.</p>
<p></p>
</blockquote>
<h2>Further reading</h2>
<p>Starting from the <a href="https://github.com/keyboardio/Kaleidoscope-GhostInTheFirmware/blob/master/examples/GhostInTheFirmware/GhostInTheFirmware.ino">example</a> is the recommended way of getting started with the plugin. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
